---
import { t } from 'i18next';
import i18next from '../i18n/config';

const { lang = 'hr' } = Astro.params;

// Change language before rendering
if (lang) {
  await i18next.changeLanguage(lang);
}

const services = [
  {
    title: t('services.project1.title'),
    description: t('services.project1.description'),
    image: "https://storage.googleapis.com/msgsndr/M4krpnwvjmupM7QGr4NX/media/67b2aaa22de3ab45eb9d0b31.png"
  },
  {
    title: t('services.project2.title'),
    description: t('services.project2.description'),
    image: "https://cdn.pixabay.com/photo/2020/10/24/07/29/man-5680696_960_720.jpg"
  },
  {
    title: t('services.project3.title'),
    description: t('services.project3.description'),
    image: "https://images.unsplash.com/photo-1624397640148-949b1732bb0a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1074&q=80"
  },
  {
    title: t('services.project4.title'),
    description: t('services.project4.description'),
    image: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/67b2a91fafe6ae4deaaa5ebe.png"
  }
];
---

<section id="services" class="relative">
  <!-- Parallax Header Section -->
  <div class="relative h-[60vh] overflow-hidden">
    <div class="absolute inset-0 bg-fixed bg-center bg-cover bg-no-repeat" 
         style="background-image: url('https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/674e160afd605f8a46bfa5c9.png');">
    </div>
    <div class="absolute inset-0 bg-gradient-to-r from-black/80 via-black/60 to-black/80"></div>
    
    <div class="relative h-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center">
      <div class="w-full">
        <!-- Content -->
        <div class="text-center max-w-3xl mx-auto">
          <h2 class="text-4xl md:text-5xl font-bold text-white mb-6">
            {t('parallax.title')}
          </h2>
          <p class="text-xl text-gray-200 mb-8 leading-relaxed">
            {t('parallax.description')}
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Projects Showcase Section -->
  <div class="bg-gradient-to-b from-gray-100 to-gray-200 py-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="space-y-20">
        {services.map((service, index) => (
          <div class="grid md:grid-cols-2 gap-12 items-center">
            <div class={`relative ${index % 2 === 1 ? 'md:order-2' : ''}`}>
              <img 
                src={service.image}
                alt={service.title}
                class="w-full h-auto rounded-lg shadow-xl cursor-zoom-in transition-transform hover:scale-[1.02] object-cover"
                data-zoomable
              />
            </div>
            <div class={index % 2 === 1 ? 'md:order-1' : ''}>
              <h3 class="text-3xl font-bold text-primary mb-4">{service.title}</h3>
              <p class="text-gray-600 text-lg">
                {service.description}
              </p>
            </div>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>

<style>
  .bg-fixed {
    background-attachment: fixed;
  }
</style>