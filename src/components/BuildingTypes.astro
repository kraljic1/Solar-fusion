---
import { t } from 'i18next';
import i18next from '../i18n/config';

const { lang = 'hr' } = Astro.params;

// Change language before rendering
if (lang) {
  await i18next.changeLanguage(lang);
}

const translations = {
  hr: [
    {
      icon: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/674f15e64c1c7aaa4744ab1e.svg",
      title: "STAMBENE ZGRADE",
      description: "🏡 Solarni paneli za obiteljske kuće omogućuju vam značajnu uštedu na računima za struju i veću energetsku neovisnost. Povećajte vrijednost svoje nekretnine i smanjite utjecaj na okoliš.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>🔹 Ušteda do 90% na računima za struju</div>\n<div>🔹 Mogućnost subvencija i poticaja</div>\n<div>🔹 Ekološki i dugoročno isplativo rješenje</div>\n</div>",
      image: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg",
      lowQualityImage: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg?w=20"
    },
    {
      icon: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/674f15e663f24e7036f80e86.svg",
      title: "INDUSTRIJSKE ZGRADE",
      description: "🏭 Solarni paneli za industrijske objekte pomažu tvrtkama smanjiti troškove energije, povećati održivost i postići bolju financijsku stabilnost. Idealno rješenje za pogone, skladišta i poslovne prostore.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>🔹 Smanjenje operativnih troškova</div>\n<div>🔹 Brzi povrat investicije</div>\n<div>🔹 Mogućnost prodaje viška energije</div>\n</div>",
      image: "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
      lowQualityImage: "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10"
    },
    {
      icon: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/674f15e69264c9b30fecdbc2.svg",
      title: "RURALNA PODRUČJA",
      description: "🌿 Solarni paneli za poljoprivredu i farme omogućuju pouzdan izvor energije i smanjuju ovisnost o nestabilnim mrežama. Savršeni su za staklenike, navodnjavanje i elektrifikaciju udaljenih područja.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>🔹 Neovisnost od mreže (off-grid sustavi)</div>\n<div>🔹 Smanjenje troškova za poljoprivrednike</div>\n<div>🔹 Sigurnost opskrbe energijom</div>\n</div>",
      image: "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
      lowQualityImage: "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10"
    }
  ],
  en: [
    {
      icon: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/674f15e64c1c7aaa4744ab1e.svg",
      title: "RESIDENTIAL BUILDINGS",
      description: "🏡 Solar panels for residential homes enable significant savings on electricity bills and greater energy independence. Increase your property value and reduce environmental impact.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>🔹 Save up to 90% on electricity bills</div>\n<div>🔹 Access to subsidies and incentives</div>\n<div>🔹 Eco-friendly and long-term cost-effective solution</div>\n</div>",
      image: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg",
      lowQualityImage: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg?w=20"
    },
    {
      icon: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/674f15e663f24e7036f80e86.svg",
      title: "INDUSTRIAL BUILDINGS",
      description: "🏭 Solar panels for industrial facilities help companies reduce energy costs, increase sustainability, and achieve better financial stability. Ideal solution for plants, warehouses, and business premises.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>🔹 Reduction in operating costs</div>\n<div>🔹 Quick return on investment</div>\n<div>🔹 Possibility to sell excess energy</div>\n</div>",
      image: "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
      lowQualityImage: "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10"
    },
    {
      icon: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/674f15e69264c9b30fecdbc2.svg",
      title: "RURAL AREAS",
      description: "🌿 Solar panels for agriculture and farms provide a reliable energy source and reduce dependence on unstable grids. Perfect for greenhouses, irrigation, and electrification of remote areas.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>🔹 Grid independence (off-grid systems)</div>\n<div>🔹 Cost reduction for farmers</div>\n<div>🔹 Secure energy supply</div>\n</div>",
      image: "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
      lowQualityImage: "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10"
    }
  ],
  sl: [
    {
      icon: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/674f15e64c1c7aaa4744ab1e.svg",
      title: "STANOVANJSKE STAVBE",
      description: "🏡 Sončne celice za stanovanjske hiše omogočajo pomembne prihranke pri računih za elektriko in večjo energetsko neodvisnost. Povečajte vrednost svoje nepremičnine in zmanjšajte vpliv na okolje.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>🔹 Prihranek do 90% pri računih za elektriko</div>\n<div>🔹 Možnost subvencij in spodbud</div>\n<div>🔹 Ekološka in dolgoročno stroškovno učinkovita rešitev</div>\n</div>",
      image: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg",
      lowQualityImage: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg?w=20"
    },
    {
      icon: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/674f15e663f24e7036f80e86.svg",
      title: "INDUSTRIJSKI OBJEKTI",
      description: "🏭 Sončne celice za industrijske objekte pomagajo podjetjem zmanjšati stroške energije, povečati trajnost in doseči boljšo finančno stabilnost. Idealna rešitev za proizvodne obrate, skladišča in poslovne prostore.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>🔹 Zmanjšanje operativnih stroškov</div>\n<div>🔹 Hiter povratek naložbe</div>\n<div>🔹 Možnost prodaje presežne energije</div>\n</div>",
      image: "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
      lowQualityImage: "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10"
    },
    {
      icon: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/674f15e69264c9b30fecdbc2.svg",
      title: "PODEŽELSKA OBMOČJA",
      description: "🌿 Sončne celice za kmetijstvo in kmetije zagotavljajo zanesljiv vir energije in zmanjšujejo odvisnost od nestabilnih omrežij. Popolne za rastlinjake, namakanje in elektrifikacijo oddaljenih območij.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>🔹 Neodvisnost od omrežja (off-grid sistemi)</div>\n<div>🔹 Zmanjšanje stroškov za kmete</div>\n<div>🔹 Zanesljiva oskrba z energijo</div>\n</div>",
      image: "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
      lowQualityImage: "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10"
    }
  ],
  de: [
    {
      icon: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/674f15e64c1c7aaa4744ab1e.svg",
      title: "WOHNGEBÄUDE",
      description: "🏡 Solarmodule für Wohnhäuser ermöglichen erhebliche Einsparungen bei den Stromrechnungen und größere Energieunabhängigkeit. Steigern Sie den Wert Ihrer Immobilie und reduzieren Sie die Umweltbelastung.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>🔹 Bis zu 90% Einsparung bei Stromrechnungen</div>\n<div>🔹 Zugang zu Subventionen und Förderungen</div>\n<div>🔹 Umweltfreundliche und langfristig kostengünstige Lösung</div>\n</div>",
      image: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg",
      lowQualityImage: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg?w=20"
    },
    {
      icon: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/674f15e663f24e7036f80e86.svg",
      title: "INDUSTRIEGEBÄUDE",
      description: "🏭 Solarmodule für Industrieanlagen helfen Unternehmen, Energiekosten zu senken, Nachhaltigkeit zu steigern und bessere finanzielle Stabilität zu erreichen. Ideale Lösung für Fabriken, Lagerhallen und Geschäftsräume.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>🔹 Reduzierung der Betriebskosten</div>\n<div>🔹 Schnelle Kapitalrendite</div>\n<div>🔹 Möglichkeit zum Verkauf überschüssiger Energie</div>\n</div>",
      image: "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
      lowQualityImage: "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10"
    },
    {
      icon: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/674f15e69264c9b30fecdbc2.svg",
      title: "LÄNDLICHE GEBIETE",
      description: "🌿 Solarmodule für Landwirtschaft und Bauernhöfe bieten eine zuverlässige Energiequelle und reduzieren die Abhängigkeit von instabilen Netzen. Perfekt für Gewächshäuser, Bewässerung und Elektrifizierung abgelegener Gebiete.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>🔹 Netzunabhängigkeit (Off-Grid-Systeme)</div>\n<div>🔹 Kostensenkung für Landwirte</div>\n<div>🔹 Sichere Energieversorgung</div>\n</div>",
      image: "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
      lowQualityImage: "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10"
    }
  ],
  it: [
    {
      icon: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/674f15e64c1c7aaa4744ab1e.svg",
      title: "EDIFICI RESIDENZIALI",
      description: "🏡 I pannelli solari per le abitazioni residenziali consentono significativi risparmi sulle bollette elettriche e una maggiore indipendenza energetica. Aumenta il valore della tua proprietà e riduci l'impatto ambientale.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>🔹 Risparmio fino al 90% sulle bollette elettriche</div>\n<div>🔹 Accesso a sovvenzioni e incentivi</div>\n<div>🔹 Soluzione ecologica ed economicamente vantaggiosa a lungo termine</div>\n</div>",
      image: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg",
      lowQualityImage: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg?w=20"
    },
    {
      icon: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/674f15e663f24e7036f80e86.svg",
      title: "EDIFICI INDUSTRIALI",
      description: "🏭 I pannelli solari per strutture industriali aiutano le aziende a ridurre i costi energetici, aumentare la sostenibilità e raggiungere una migliore stabilità finanziaria. Soluzione ideale per impianti, magazzini e locali commerciali.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>🔹 Riduzione dei costi operativi</div>\n<div>🔹 Rapido ritorno sull'investimento</div>\n<div>🔹 Possibilità di vendere energia in eccesso</div>\n</div>",
      image: "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
      lowQualityImage: "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10"
    },
    {
      icon: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/674f15e69264c9b30fecdbc2.svg",
      title: "AREE RURALI",
      description: "🌿 I pannelli solari per agricoltura e fattorie forniscono una fonte di energia affidabile e riducono la dipendenza da reti instabili. Perfetti per serre, irrigazione ed elettrificazione di aree remote.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>🔹 Indipendenza dalla rete (sistemi off-grid)</div>\n<div>🔹 Riduzione dei costi per gli agricoltori</div>\n<div>🔹 Fornitura energetica sicura</div>\n</div>",
      image: "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
      lowQualityImage: "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10"
    }
  ],
  hu: [
    {
      icon: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/674f15e64c1c7aaa4744ab1e.svg",
      title: "LAKÓÉPÜLETEK",
      description: "🏡 A lakóházak napelemei jelentős megtakarítást tesznek lehetővé a villanyszámlákon és nagyobb energetikai függetlenséget biztosítanak. Növelje ingatlana értékét és csökkentse környezeti hatását.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>🔹 Akár 90% megtakarítás a villanyszámlákon</div>\n<div>🔹 Támogatások és ösztönzők elérhetősége</div>\n<div>🔹 Környezetbarát és hosszú távon költséghatékony megoldás</div>\n</div>",
      image: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg",
      lowQualityImage: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg?w=20"
    },
    {
      icon: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/674f15e663f24e7036f80e86.svg",
      title: "IPARI ÉPÜLETEK",
      description: "🏭 Az ipari létesítmények napelemei segítenek a vállalatoknak csökkenteni az energiaköltségeket, növelni a fenntarthatóságot és jobb pénzügyi stabilitást elérni. Ideális megoldás üzemek, raktárak és üzlethelyiségek számára.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>🔹 Működési költségek csökkentése</div>\n<div>🔹 Gyors megtérülés</div>\n<div>🔹 Többletenergia értékesítésének lehetősége</div>\n</div>",
      image: "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
      lowQualityImage: "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10"
    },
    {
      icon: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/674f15e69264c9b30fecdbc2.svg",
      title: "VIDÉKI TERÜLETEK",
      description: "🌿 A mezőgazdaság és farmok napelemei megbízható energiaforrást biztosítanak és csökkentik a függést az instabil hálózatoktól. Tökéletes üvegházak, öntözés és távoli területek villamosítására.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>🔹 Hálózattól való függetlenség (off-grid rendszerek)</div>\n<div>🔹 Költségcsökkentés gazdálkodóknak</div>\n<div>🔹 Biztonságos energiaellátás</div>\n</div>",
      image: "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
      lowQualityImage: "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10"
    }
  ]
};

const types = translations[lang] || translations.hr;
---

<section class="py-20 bg-white">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="grid md:grid-cols-3 gap-8">
      {types.map((type) => (
        <div class="flex flex-col items-center p-8 rounded-2xl bg-gradient-to-b from-gray-50 to-gray-100">
          <img 
            src={type.icon} 
            alt={type.title}
            class="w-24 h-24 mb-4"
            loading="lazy"
            width="96"
            height="96"
          />
          <h3 class="text-2xl font-bold text-primary mb-3 text-center">{type.title}</h3>
          <div class="text-gray-600 text-left mb-6 prose" set:html={type.description} />
          <div class="relative w-full aspect-video">
            <img 
              src={type.lowQualityImage}
              data-src={type.image}
              alt={`${type.title} Example`}
              class="lazy-image w-full h-64 object-cover rounded-lg shadow-lg blur-sm transition-opacity duration-300"
              loading="lazy"
              width="600"
              height="400"
              data-zoomable
            />
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<script>
  // Lazy load images with blur-up technique
  document.addEventListener('DOMContentLoaded', function() {
    const lazyImages = document.querySelectorAll('.lazy-image');
    
    if ('IntersectionObserver' in window) {
      const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const img = entry.target;
            const fullRes = new Image();
            
            fullRes.onload = () => {
              img.src = fullRes.src;
              img.classList.remove('blur-sm');
            };
            
            fullRes.src = img.dataset.src;
            observer.unobserve(img);
          }
        });
      });

      lazyImages.forEach(img => imageObserver.observe(img));
    } else {
      // Fallback for older browsers
      lazyImages.forEach(img => {
        img.src = img.dataset.src;
        img.classList.remove('blur-sm');
      });
    }
  });
</script>