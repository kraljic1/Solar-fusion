---
import { t as tFunc } from "i18next";
import i18next from "../i18n/config";

const { lang = "hr" } = Astro.params;

// Change language before rendering
if (lang) {
    await i18next.changeLanguage(lang);
}

interface BuildingType {
    icon: string;
    title: string;
    description: string;
    image: string;
    lowQualityImage: string;
}

type TranslationMap = {
    [key: string]: BuildingType[];
};

// SVG icons as strings
const houseIcon = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" fill="none" stroke="currentColor" stroke-width="3" class="w-full h-full text-primary">
  <path d="M20,50 L50,20 L80,50" stroke-linecap="round"/>
  <path d="M30,42 L30,80 L70,80 L70,42" stroke-linejoin="round"/>
  <rect x="45" y="55" width="10" height="25"/>
</svg>`;

const factoryIcon = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" fill="none" stroke="currentColor" stroke-width="3" class="w-full h-full text-primary">
  <path d="M20,80 L20,30 L30,30 L30,80" stroke-linejoin="round"/>
  <path d="M30,40 L50,50 L50,80" stroke-linejoin="round"/>
  <path d="M50,60 L70,70 L70,80" stroke-linejoin="round"/>
  <path d="M70,30 L70,50" stroke-linecap="round"/>
  <path d="M70,30 C70,25 75,25 75,30" stroke-linecap="round"/>
  <rect x="35" y="60" width="10" height="10"/>
  <rect x="55" y="70" width="10" height="10"/>
  <path d="M15,80 L85,80" stroke-linecap="round"/>
</svg>`;

const farmIcon = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" fill="none" stroke="currentColor" stroke-width="3" class="w-full h-full text-primary">
  <path d="M70,45 L85,45 L85,65 C85,70 80,70 80,65 L80,55 L75,55 L75,65 L70,65 Z" stroke-linejoin="round" fill="currentColor"/>
  <path d="M15,65 L85,65" stroke-linecap="round"/>
  <path d="M20,65 C20,60 25,55 25,50 C25,45 30,40 30,35 C30,30 35,25 35,20" stroke-linecap="round"/>
  <path d="M40,65 C40,60 45,55 45,50 C45,45 50,40 50,35 C50,30 55,25 55,20" stroke-linecap="round"/>
  <path d="M60,65 C60,60 65,55 65,50 C65,45 70,40 70,35 C70,30 75,25 75,20" stroke-linecap="round"/>
</svg>`;

const translations: TranslationMap = {
    hr: [
        {
            icon: houseIcon,
            title: "STAMBENE ZGRADE",
            description:
                "ğŸ¡ Solarni paneli za obiteljske kuÄ‡e omoguÄ‡uju vam znaÄajnu uÅ¡tedu na raÄunima za struju i veÄ‡u energetsku neovisnost. PoveÄ‡ajte vrijednost svoje nekretnine i smanjite utjecaj na okoliÅ¡.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>ğŸ”¹ UÅ¡teda do 90% na raÄunima za struju</div>\n<div>ğŸ”¹ MoguÄ‡nost subvencija i poticaja</div>\n<div>ğŸ”¹ EkoloÅ¡ki i dugoroÄno isplativo rjeÅ¡enje</div>\n</div>",
            image: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg",
            lowQualityImage:
                "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg?w=20",
        },
        {
            icon: factoryIcon,
            title: "INDUSTRIJSKE ZGRADE",
            description:
                "ğŸ­ Solarni paneli za industrijske objekte pomaÅ¾u tvrtkama smanjiti troÅ¡kove energije, poveÄ‡ati odrÅ¾ivost i postiÄ‡i bolju financijsku stabilnost. Idealno rjeÅ¡enje za pogone, skladiÅ¡ta i poslovne prostore.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>ğŸ”¹ Smanjenje operativnih troÅ¡kova</div>\n<div>ğŸ”¹ Brzi povrat investicije</div>\n<div>ğŸ”¹ MoguÄ‡nost prodaje viÅ¡ka energije</div>\n</div>",
            image: "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
            lowQualityImage:
                "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10",
        },
        {
            icon: farmIcon,
            title: "RURALNA PODRUÄŒJA",
            description:
                "ğŸŒ¿ Solarni paneli za poljoprivredu i farme omoguÄ‡uju pouzdan izvor energije i smanjuju ovisnost o nestabilnim mreÅ¾ama. SavrÅ¡eni su za staklenike, navodnjavanje i elektrifikaciju udaljenih podruÄja.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>ğŸ”¹ Neovisnost od mreÅ¾e (off-grid sustavi)</div>\n<div>ğŸ”¹ Smanjenje troÅ¡kova za poljoprivrednike</div>\n<div>ğŸ”¹ Sigurnost opskrbe energijom</div>\n</div>",
            image: "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
            lowQualityImage:
                "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10",
        },
    ],
    en: [
        {
            icon: houseIcon,
            title: "RESIDENTIAL BUILDINGS",
            description:
                "ğŸ¡ Solar panels for residential homes enable significant savings on electricity bills and greater energy independence. Increase your property value and reduce environmental impact.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>ğŸ”¹ Save up to 90% on electricity bills</div>\n<div>ğŸ”¹ Access to subsidies and incentives</div>\n<div>ğŸ”¹ Eco-friendly and long-term cost-effective solution</div>\n</div>",
            image: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg",
            lowQualityImage:
                "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg?w=20",
        },
        {
            icon: factoryIcon,
            title: "INDUSTRIAL BUILDINGS",
            description:
                "ğŸ­ Solar panels for industrial facilities help companies reduce energy costs, increase sustainability, and achieve better financial stability. Ideal solution for plants, warehouses, and business premises.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>ğŸ”¹ Reduction in operating costs</div>\n<div>ğŸ”¹ Quick return on investment</div>\n<div>ğŸ”¹ Possibility to sell excess energy</div>\n</div>",
            image: "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
            lowQualityImage:
                "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10",
        },
        {
            icon: farmIcon,
            title: "RURAL AREAS",
            description:
                "ğŸŒ¿ Solar panels for agriculture and farms provide a reliable energy source and reduce dependence on unstable grids. Perfect for greenhouses, irrigation, and electrification of remote areas.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>ğŸ”¹ Grid independence (off-grid systems)</div>\n<div>ğŸ”¹ Cost reduction for farmers</div>\n<div>ğŸ”¹ Secure energy supply</div>\n</div>",
            image: "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
            lowQualityImage:
                "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10",
        },
    ],
    sl: [
        {
            icon: houseIcon,
            title: "STANOVANJSKE STAVBE",
            description:
                "ğŸ¡ SonÄne celice za stanovanjske hiÅ¡e omogoÄajo pomembne prihranke pri raÄunih za elektriko in veÄjo energetsko neodvisnost. PoveÄajte vrednost svoje nepremiÄnine in zmanjÅ¡ajte vpliv na okolje.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>ğŸ”¹ Prihranek do 90% pri raÄunih za elektriko</div>\n<div>ğŸ”¹ MoÅ¾nost subvencij in spodbud</div>\n<div>ğŸ”¹ EkoloÅ¡ka in dolgoroÄno stroÅ¡kovno uÄinkovita reÅ¡itev</div>\n</div>",
            image: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg",
            lowQualityImage:
                "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg?w=20",
        },
        {
            icon: factoryIcon,
            title: "INDUSTRIJSKI OBJEKTI",
            description:
                "ğŸ­ SonÄne celice za industrijske objekte pomagajo podjetjem zmanjÅ¡ati stroÅ¡ke energije, poveÄati trajnost in doseÄi boljÅ¡o finanÄno stabilnost. Idealna reÅ¡itev za proizvodne obrate, skladiÅ¡Äa in poslovne prostore.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>ğŸ”¹ ZmanjÅ¡anje operativnih stroÅ¡kov</div>\n<div>ğŸ”¹ Hiter povratek naloÅ¾be</div>\n<div>ğŸ”¹ MoÅ¾nost prodaje preseÅ¾ne energije</div>\n</div>",
            image: "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
            lowQualityImage:
                "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10",
        },
        {
            icon: farmIcon,
            title: "PODEÅ½ELSKA OBMOÄŒJA",
            description:
                "ğŸŒ¿ SonÄne celice za kmetijstvo in kmetije zagotavljajo zanesljiv vir energije in zmanjÅ¡ujejo odvisnost od nestabilnih omreÅ¾ij. Popolne za rastlinjake, namakanje in elektrifikacijo oddaljenih obmoÄij.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>ğŸ”¹ Neodvisnost od omreÅ¾ja (off-grid sistemi)</div>\n<div>ğŸ”¹ ZmanjÅ¡anje stroÅ¡kov za kmete</div>\n<div>ğŸ”¹ Zanesljiva oskrba z energijo</div>\n</div>",
            image: "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
            lowQualityImage:
                "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10",
        },
    ],
    de: [
        {
            icon: houseIcon,
            title: "WOHNGEBÃ„UDE",
            description:
                "ğŸ¡ Solarmodule fÃ¼r WohnhÃ¤user ermÃ¶glichen erhebliche Einsparungen bei den Stromrechnungen und grÃ¶ÃŸere EnergieunabhÃ¤ngigkeit. Steigern Sie den Wert Ihrer Immobilie und reduzieren Sie die Umweltbelastung.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>ğŸ”¹ Bis zu 90% Einsparung bei Stromrechnungen</div>\n<div>ğŸ”¹ Zugang zu Subventionen und FÃ¶rderungen</div>\n<div>ğŸ”¹ Umweltfreundliche und langfristig kostengÃ¼nstige LÃ¶sung</div>\n</div>",
            image: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg",
            lowQualityImage:
                "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg?w=20",
        },
        {
            icon: factoryIcon,
            title: "INDUSTRIEGEBÃ„UDE",
            description:
                "ğŸ­ Solarmodule fÃ¼r Industrieanlagen helfen Unternehmen, Energiekosten zu senken, Nachhaltigkeit zu steigern und bessere finanzielle StabilitÃ¤t zu erreichen. Ideale LÃ¶sung fÃ¼r Fabriken, Lagerhallen und GeschÃ¤ftsrÃ¤ume.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>ğŸ”¹ Reduzierung der Betriebskosten</div>\n<div>ğŸ”¹ Schnelle Kapitalrendite</div>\n<div>ğŸ”¹ MÃ¶glichkeit zum Verkauf Ã¼berschÃ¼ssiger Energie</div>\n</div>",
            image: "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
            lowQualityImage:
                "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10",
        },
        {
            icon: farmIcon,
            title: "LÃ„NDLICHE GEBIETE",
            description:
                "ğŸŒ¿ Solarmodule fÃ¼r Landwirtschaft und BauernhÃ¶fe bieten eine zuverlÃ¤ssige Energiequelle und reduzieren die AbhÃ¤ngigkeit von instabilen Netzen. Perfekt fÃ¼r GewÃ¤chshÃ¤user, BewÃ¤sserung und Elektrifizierung abgelegener Gebiete.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>ğŸ”¹ NetzunabhÃ¤ngigkeit (Off-Grid-Systeme)</div>\n<div>ğŸ”¹ Kostensenkung fÃ¼r Landwirte</div>\n<div>ğŸ”¹ Sichere Energieversorgung</div>\n</div>",
            image: "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
            lowQualityImage:
                "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10",
        },
    ],
    it: [
        {
            icon: houseIcon,
            title: "EDIFICI RESIDENZIALI",
            description:
                "ğŸ¡ I pannelli solari per le abitazioni residenziali consentono significativi risparmi sulle bollette elettriche e una maggiore indipendenza energetica. Aumenta il valore della tua proprietÃ  e riduci l'impatto ambientale.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>ğŸ”¹ Risparmio fino al 90% sulle bollette elettriche</div>\n<div>ğŸ”¹ Accesso a sovvenzioni e incentivi</div>\n<div>ğŸ”¹ Soluzione ecologica ed economicamente vantaggiosa a lungo termine</div>\n</div>",
            image: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg",
            lowQualityImage:
                "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg?w=20",
        },
        {
            icon: factoryIcon,
            title: "EDIFICI INDUSTRIALI",
            description:
                "ğŸ­ I pannelli solari per strutture industriali aiutano le aziende a ridurre i costi energetici, aumentare la sostenibilitÃ  e raggiungere una migliore stabilitÃ  finanziaria. Soluzione ideale per impianti, magazzini e locali commerciali.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>ğŸ”¹ Riduzione dei costi operativi</div>\n<div>ğŸ”¹ Rapido ritorno sull'investimento</div>\n<div>ğŸ”¹ PossibilitÃ  di vendere energia in eccesso</div>\n</div>",
            image: "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
            lowQualityImage:
                "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10",
        },
        {
            icon: farmIcon,
            title: "AREE RURALI",
            description:
                "ğŸŒ¿ I pannelli solari per agricoltura e fattorie forniscono una fonte di energia affidabile e riducono la dipendenza da reti instabili. Perfetti per serre, irrigazione ed elettrificazione di aree remote.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>ğŸ”¹ Indipendenza dalla rete (sistemi off-grid)</div>\n<div>ğŸ”¹ Riduzione dei costi per gli agricoltori</div>\n<div>ğŸ”¹ Fornitura energetica sicura</div>\n</div>",
            image: "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
            lowQualityImage:
                "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10",
        },
    ],
    hu: [
        {
            icon: houseIcon,
            title: "LAKÃ“Ã‰PÃœLETEK",
            description:
                "ğŸ¡ A lakÃ³hÃ¡zak napelemei jelentÅ‘s megtakarÃ­tÃ¡st tesznek lehetÅ‘vÃ© a villanyszÃ¡mlÃ¡kon Ã©s nagyobb energetikai fÃ¼ggetlensÃ©get biztosÃ­tanak. NÃ¶velje ingatlana Ã©rtÃ©kÃ©t Ã©s csÃ¶kkentse kÃ¶rnyezeti hatÃ¡sÃ¡t.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>ğŸ”¹ AkÃ¡r 90% megtakarÃ­tÃ¡s a villanyszÃ¡mlÃ¡kon</div>\n<div>ğŸ”¹ TÃ¡mogatÃ¡sok Ã©s Ã¶sztÃ¶nzÅ‘k elÃ©rhetÅ‘sÃ©ge</div>\n<div>ğŸ”¹ KÃ¶rnyezetbarÃ¡t Ã©s hosszÃº tÃ¡von kÃ¶ltsÃ©ghatÃ©kony megoldÃ¡s</div>\n</div>",
            image: "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg",
            lowQualityImage:
                "https://assets.cdn.filesafe.space/M4krpnwvjmupM7QGr4NX/media/bb36ce78-1da3-4756-9b03-20286a8d8fb0.jpeg?w=20",
        },
        {
            icon: factoryIcon,
            title: "IPARI Ã‰PÃœLETEK",
            description:
                "ğŸ­ Az ipari lÃ©tesÃ­tmÃ©nyek napelemei segÃ­tenek a vÃ¡llalatoknak csÃ¶kkenteni az energiakÃ¶ltsÃ©geket, nÃ¶velni a fenntarthatÃ³sÃ¡got Ã©s jobb pÃ©nzÃ¼gyi stabilitÃ¡st elÃ©rni. IdeÃ¡lis megoldÃ¡s Ã¼zemek, raktÃ¡rak Ã©s Ã¼zlethelyisÃ©gek szÃ¡mÃ¡ra.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>ğŸ”¹ MÅ±kÃ¶dÃ©si kÃ¶ltsÃ©gek csÃ¶kkentÃ©se</div>\n<div>ğŸ”¹ Gyors megtÃ©rÃ¼lÃ©s</div>\n<div>ğŸ”¹ TÃ¶bbletenergia Ã©rtÃ©kesÃ­tÃ©sÃ©nek lehetÅ‘sÃ©ge</div>\n</div>",
            image: "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
            lowQualityImage:
                "https://images.unsplash.com/photo-1545209463-e2825498edbf?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10",
        },
        {
            icon: farmIcon,
            title: "VIDÃ‰KI TERÃœLETEK",
            description:
                "ğŸŒ¿ A mezÅ‘gazdasÃ¡g Ã©s farmok napelemei megbÃ­zhatÃ³ energiaforrÃ¡st biztosÃ­tanak Ã©s csÃ¶kkentik a fÃ¼ggÃ©st az instabil hÃ¡lÃ³zatoktÃ³l. TÃ¶kÃ©letes Ã¼veghÃ¡zak, Ã¶ntÃ¶zÃ©s Ã©s tÃ¡voli terÃ¼letek villamosÃ­tÃ¡sÃ¡ra.\n\n<hr class='my-4 border-gray-200'>\n\n<div class='space-y-2'>\n<div>ğŸ”¹ HÃ¡lÃ³zattÃ³l valÃ³ fÃ¼ggetlensÃ©g (off-grid rendszerek)</div>\n<div>ğŸ”¹ KÃ¶ltsÃ©gcsÃ¶kkentÃ©s gazdÃ¡lkodÃ³knak</div>\n<div>ğŸ”¹ BiztonsÃ¡gos energiaellÃ¡tÃ¡s</div>\n</div>",
            image: "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",
            lowQualityImage:
                "https://images.unsplash.com/photo-1628206554201-41ebb06ef313?ixlib=rb-1.2.1&auto=format&fit=crop&w=20&q=10",
        },
    ],
};

const types = translations[lang] || translations.hr;
---

<section class="py-20 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid md:grid-cols-3 gap-8">
            {
                types.map((type) => (
                    <div class="flex flex-col items-center p-8 rounded-2xl bg-gradient-to-b from-gray-50 to-gray-100 h-full">
                        <div class="w-24 h-24 mb-4">
                            <Fragment set:html={type.icon} />
                        </div>
                        <h3 class="text-2xl font-bold text-primary mb-3 text-center">
                            {type.title}
                        </h3>
                        <div
                            class="text-gray-600 text-left mb-6 prose flex-1"
                            set:html={type.description}
                        />
                        <div class="relative w-full aspect-video mt-auto">
                            <img
                                src={type.lowQualityImage}
                                data-src={type.image}
                                alt={`${type.title} Example`}
                                class="lazy-image w-full h-64 object-cover rounded-lg shadow-lg blur-sm transition-opacity duration-300"
                                loading="lazy"
                                width="600"
                                height="400"
                                data-zoomable
                            />
                        </div>
                    </div>
                ))
            }
        </div>
    </div>
</section>

<script>
    // Lazy load images with blur-up technique
    document.addEventListener("DOMContentLoaded", function () {
        const lazyImages = document.querySelectorAll(".lazy-image");

        if ("IntersectionObserver" in window) {
            const imageObserver = new IntersectionObserver(
                (entries, observer) => {
                    entries.forEach((entry) => {
                        if (entry.isIntersecting) {
                            const img = entry.target as HTMLImageElement;
                            const fullRes = new Image();

                            fullRes.onload = () => {
                                img.src = fullRes.src;
                                img.classList.remove("blur-sm");
                            };

                            if (img.dataset.src) {
                                fullRes.src = img.dataset.src;
                            }
                            observer.unobserve(img);
                        }
                    });
                }
            );

            lazyImages.forEach((img) => imageObserver.observe(img));
        } else {
            // Fallback for older browsers
            lazyImages.forEach((img) => {
                const imgElement = img as HTMLImageElement;
                if (imgElement.dataset.src) {
                    imgElement.src = imgElement.dataset.src;
                }
                imgElement.classList.remove("blur-sm");
            });
        }
    });
</script>
